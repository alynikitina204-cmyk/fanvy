<!DOCTYPE html>
<html>
<head>
<title>Chat</title>
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
<style>
body{background:#f5f5f7;font-family:system-ui}
.container{max-width:900px;margin:40px auto;background:white;border-radius:16px;display:flex;flex-direction:column;height:80vh}

.header{padding:15px;border-bottom:1px solid #eee;font-weight:600}

.messages{flex:1;overflow-y:auto;padding:15px;display:flex;flex-direction:column;gap:10px}

.msg{max-width:70%;padding:10px 14px;border-radius:14px;font-size:14px}

.me{background:#ff4d8d;color:white;align-self:flex-end}
.them{background:#f0f0f0;align-self:flex-start}

.input-box{display:flex;padding:15px;border-top:1px solid #eee}
.input-box input{flex:1;border-radius:20px;border:1px solid #ddd;padding:10px}
.input-box button{background:#ff4d8d;color:white;border:none;border-radius:20px;padding:10px 18px;margin-left:8px}
</style>
</head>

<body>
{% include '_theme_toggle.html' %}

<div class="container">

    <div class="header">
        Chat with {{ user.username }} {{ user.id | online_status }}
        {% if user.subscription == 'premium' %}
            <span class="admin-badge">ADMIN</span>
        {% endif %}
    </div>

    <div class="messages" id="messages">
        {% for msg in messages %}
            <div class="msg {% if msg.sender_id == session['user_id'] %}me{% else %}them{% endif %}">
                {{ msg.content }}
            </div>
        {% endfor %}
    </div>

    <form method="POST" class="input-box">
        <input type="text" name="content" placeholder="Type a message..." required>
        <button>Send</button>
    </form>

</div>

<script>
setInterval(() => {
    location.reload();
}, 3000);
</script>

</body>
</html>
